"use strict";(self.webpackChunkcompass=self.webpackChunkcompass||[]).push([[329],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=u(n),m=r,g=c["".concat(l,".").concat(m)]||c[m]||p[m]||s;return n?a.createElement(g,o(o({ref:t},d),{},{components:n})):a.createElement(g,o({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,o=new Array(s);o[0]=c;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var u=2;u<s;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},4958:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return p}});var a=n(7462),r=n(3366),s=(n(7294),n(3905)),o=["components"],i={},l="3. Asset Lineage",u={unversionedId:"tour/asset-lineage",id:"tour/asset-lineage",title:"3. Asset Lineage",description:"3.1 Inserting lineage",source:"@site/docs/tour/3-asset-lineage.mdx",sourceDirName:"tour",slug:"/tour/asset-lineage",permalink:"/compass/tour/asset-lineage",draft:!1,editUrl:"https://github.com/odpf/compass/edit/master/docs/docs/tour/3-asset-lineage.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"docsSidebar",previous:{title:"2. Querying your Assets",permalink:"/compass/tour/querying-assets"},next:{title:"Ingesting metadata",permalink:"/compass/guides/ingestion"}},d={},p=[{value:"3.1 Inserting lineage",id:"31-inserting-lineage",level:2},{value:"Querying Lineage",id:"querying-lineage",level:2},{value:"Conclusion",id:"conclusion",level:2}],c={toc:p};function m(e){var t=e.components,n=(0,r.Z)(e,o);return(0,s.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"3-asset-lineage"},"3. Asset Lineage"),(0,s.kt)("h2",{id:"31-inserting-lineage"},"3.1 Inserting lineage"),(0,s.kt)("p",null,"To have a lineage, we need at least two assets to be linked with each other.\nCompass only needs one of the assets to define the lineage."),(0,s.kt)("p",null,"Let's create a new dashboard asset (tableau) that uses data from the ",(0,s.kt)("inlineCode",{parentName:"p"},"main-postgres:my-database.orders")," table asset that we created earlier in ",(0,s.kt)("a",{parentName:"p",href:"/compass/tour/my-first-asset#13-sending-your-first-asset-to-compass"},"first section"),".\nAnd while creating the asset, we can also define its lineage in the same request."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},'curl --location --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Content-Type: application/json\' \\\n--header \'Compass-User-UUID: john.doe@example.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "tableau:my-dashboard.daily-orders",\n        "type": "dashboard",\n        "service": "tableau",\n        "name": "Daily Orders Dashboard",\n        "description": "This is a dashboard showing daily orders"\n    },\n    "upstreams": [\n        {\n            "urn": "main-postgres:my-database.orders"\n        }\n    ]\n}\'\n')),(0,s.kt)("p",null,"We use ",(0,s.kt)("inlineCode",{parentName:"p"},"upstreams")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"downstreams")," field to define lineage.\nFrom the example above ",(0,s.kt)("inlineCode",{parentName:"p"},"main-postgres:my-database.orders")," is the source of the dashboard, so we put it inside ",(0,s.kt)("inlineCode",{parentName:"p"},"upstreams")," field."),(0,s.kt)("p",null,"And just like that we just created a lineage :)"),(0,s.kt)("h2",{id:"querying-lineage"},"Querying Lineage"),(0,s.kt)("p",null,"Once lineage is defined, we can easily fetch them using a single asset URN to be the center of the lineage like below"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"curl 'http://localhost:8080/v1beta1/lineage/tableau:my-dashboard.daily-orders' \\\n--header 'Compass-User-UUID: john.doe@example.com'\n")),(0,s.kt)("p",null,"And you will get this as the response"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "data": [\n        {\n            "source": "main-postgres:my-database.orders",\n            "target": "tableau:my-dashboard.daily-orders",\n            "prop": {\n                "root": "tableau:my-dashboard.daily-orders"\n            }\n        }\n    ]\n}\n')),(0,s.kt)("p",null,"You can also get the lineage using ",(0,s.kt)("inlineCode",{parentName:"p"},"main-postgres:my-database.orders"),", even when you have only defined ",(0,s.kt)("inlineCode",{parentName:"p"},"upstreams")," on ",(0,s.kt)("inlineCode",{parentName:"p"},"tableau:my-dashboard.daily-orders"),"."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"curl 'http://localhost:8080/v1beta1/lineage/main-postgres:my-database.orders' \\\n--header 'Compass-User-UUID: john.doe@example.com'\n")),(0,s.kt)("h2",{id:"conclusion"},"Conclusion"),(0,s.kt)("p",null,"This is merely a simple example of how Compass can help you manage and build your Data Lineage.\nYou just need to dump all of your assets along with its ",(0,s.kt)("inlineCode",{parentName:"p"},"upstreams")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"downstreams")," as shown above and Compass will take care of the rest."),(0,s.kt)("p",null,"And that's it, we have just covered all the basics of Compass and how you can use it to manage and maintain your metadata.\nAside from features introduced in this tour, Compass also has additional features such as Asset starring and discussion, you can check those in the ",(0,s.kt)("a",{parentName:"p",href:"../guides/starring"},"Guides section"),"."))}m.isMDXComponent=!0}}]);