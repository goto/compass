"use strict";(self.webpackChunkcompass=self.webpackChunkcompass||[]).push([[918],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),i=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=i(e.components);return a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=i(n),m=r,h=d["".concat(u,".").concat(m)]||d[m]||p[m]||s;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,o=new Array(s);o[0]=d;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var i=2;i<s;i++)o[i]=n[i];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5162:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(7294),r=n(6010),s="tabItem_Ymn6";function o(e){var t=e.children,n=e.hidden,o=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(s,o),hidden:n},t)}},5488:function(e,t,n){n.d(t,{Z:function(){return m}});var a=n(7462),r=n(7294),s=n(6010),o=n(2389),l=n(7392),u=n(7094),i=n(2466),c="tabList__CuJ",p="tabItem_LNqP";function d(e){var t,n,o=e.lazy,d=e.block,m=e.defaultValue,h=e.values,b=e.groupId,f=e.className,y=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=h?h:y.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),v=(0,l.l)(g,(function(e,t){return e.value===t.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var k=null===m?m:null!=(t=null!=m?m:null==(n=y.find((function(e){return e.props.default})))?void 0:n.props.value)?t:y[0].props.value;if(null!==k&&!g.some((function(e){return e.value===k})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+k+'" but none of its children has the corresponding value. Available values are: '+g.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var w=(0,u.U)(),N=w.tabGroupChoices,C=w.setTabGroupChoices,T=(0,r.useState)(k),j=T[0],U=T[1],x=[],I=(0,i.o5)().blockElementScrollPositionUntilNextRender;if(null!=b){var O=N[b];null!=O&&O!==j&&g.some((function(e){return e.value===O}))&&U(O)}var P=function(e){var t=e.currentTarget,n=x.indexOf(t),a=g[n].value;a!==j&&(I(t),U(a),null!=b&&C(b,String(a)))},D=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a,r=x.indexOf(e.currentTarget)+1;n=null!=(a=x[r])?a:x[0];break;case"ArrowLeft":var s,o=x.indexOf(e.currentTarget)-1;n=null!=(s=x[o])?s:x[x.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:(0,s.Z)("tabs-container",c)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":d},f)},g.map((function(e){var t=e.value,n=e.label,o=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:j===t?0:-1,"aria-selected":j===t,key:t,ref:function(e){return x.push(e)},onKeyDown:D,onFocus:P,onClick:P},o,{className:(0,s.Z)("tabs__item",p,null==o?void 0:o.className,{"tabs__item--active":j===t})}),null!=n?n:t)}))),o?(0,r.cloneElement)(y.filter((function(e){return e.props.value===j}))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},y.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==j})}))))}function m(e){var t=(0,o.Z)();return r.createElement(d,(0,a.Z)({key:String(t)},e))}},7116:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return c},default:function(){return b},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return m}});var a=n(7462),r=n(3366),s=(n(7294),n(3905)),o=n(5488),l=n(5162),u=["components"],i={},c="2. Querying your Assets",p={unversionedId:"tour/querying-assets",id:"tour/querying-assets",title:"2. Querying your Assets",description:"In this section, we will learn how we can find and search our assets using the following approaches:",source:"@site/docs/tour/2-querying-assets.mdx",sourceDirName:"tour",slug:"/tour/querying-assets",permalink:"/compass/tour/querying-assets",draft:!1,editUrl:"https://github.com/odpf/compass/edit/master/docs/docs/tour/2-querying-assets.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"docsSidebar",previous:{title:"1. My First Asset",permalink:"/compass/tour/my-first-asset"},next:{title:"3. Asset Lineage",permalink:"/compass/tour/asset-lineage"}},d={},m=[{value:"2.1 Using URN",id:"21-using-urn",level:2},{value:"2.2 Adding more assets",id:"22-adding-more-assets",level:2},{value:"2.3 Using Search API",id:"23-using-search-api",level:2},{value:"Conclusion",id:"conclusion",level:2}],h={toc:m};function b(e){var t=e.components,n=(0,r.Z)(e,u);return(0,s.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"2-querying-your-assets"},"2. Querying your Assets"),(0,s.kt)("p",null,"In this section, we will learn how we can find and search our assets using the following approaches:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#21-using-urn"},"Using URN")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#23-using-search-api"},"Using Search API"))),(0,s.kt)("h2",{id:"21-using-urn"},"2.1 Using URN"),(0,s.kt)("p",null,"Using the URN returned from when ",(0,s.kt)("a",{parentName:"p",href:"/compass/tour/my-first-asset#13-sending-your-first-asset-to-compass"},"you are uploading your asset"),", you can easily find your asset like below"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"curl 'http://localhost:8080/v1beta1/assets/cebeb793-8933-434c-b38f-beb6dbad91a5' \\\n--header 'Content-Type: application/json' \\\n--header 'Compass-User-UUID: john.doe@example.com'\n")),(0,s.kt)("p",null,"It will return"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "id": "cebeb793-8933-434c-b38f-beb6dbad91a5",\n    "urn": "main-postgres:my-database.orders",\n    "type": "table",\n    "service": "postgres",\n    "name": "orders",\n    "description": "",\n    "data": {\n      "database": "my-database",\n      "namespace": "main-postgres"\n    },\n    "labels": null,\n    "owners": [],\n    "version": "0.2",\n    "updated_by": {\n      "uuid": "john.doe@example.com"\n    },\n    "changelog": [],\n    "created_at": "2021-03-22T22:45:11.160593Z",\n    "updated_at": "2021-03-22T22:45:11.160593Z"\n  }\n}\n')),(0,s.kt)("h2",{id:"22-adding-more-assets"},"2.2 Adding more assets"),(0,s.kt)("p",null,"Before we try other APIs let's first add ",(0,s.kt)("strong",{parentName:"p"},"5 additional assets")," to Compass."),(0,s.kt)(o.Z,{mdxType:"Tabs"},(0,s.kt)(l.Z,{value:"product",label:"Product Table",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},'curl --location --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Content-Type: application/json\' \\\n--header \'Compass-User-UUID: john.doe@example.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "main-postgres:my-database.products",\n        "type": "table",\n        "service": "postgres",\n        "name": "products",\n        "data": {\n            "database": "my-database",\n            "namespace": "main-postgres"\n        }\n    }\n}\n\'\n'))),(0,s.kt)(l.Z,{value:"different-database",label:"Different Database",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},'curl --location --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Content-Type: application/json\' \\\n--header \'Compass-User-UUID: john.doe@example.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "main-postgres:temp-database.invoices",\n        "type": "table",\n        "service": "postgres",\n        "name": "invoices",\n        "data": {\n            "database": "temp-database",\n            "namespace": "main-postgres"\n        }\n    }\n}\n\'\n'))),(0,s.kt)(l.Z,{value:"mysql",label:"MySQL",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},'curl --location --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Content-Type: application/json\' \\\n--header \'Compass-User-UUID: john.doe@example.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "userdb:identity.users",\n        "type": "table",\n        "service": "mysql",\n        "name": "users",\n        "data": {\n            "database": "identity",\n            "namespace": "userdb"\n        }\n    }\n}\n\'\n'))),(0,s.kt)(l.Z,{value:"dashboard-type",label:"Dashboard Type",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},'curl --location --request PATCH \'http://localhost:8080/v1beta1/assets\' \\\n--header \'Content-Type: application/json\' \\\n--header \'Compass-User-UUID: john.doe@example.com\' \\\n--data-raw \'{\n    "asset": {\n        "urn": "mymetabase:collections/123",\n        "type": "dashboard",\n        "service": "metabase",\n        "name": "My Profit Dashboard",\n        "data": {\n            "collection_id": 123,\n            "charts": [\n              "Income Chart",\n              "Outcome Chart"\n            ]\n        }\n    }\n}\n\'\n')))),(0,s.kt)("h2",{id:"23-using-search-api"},"2.3 Using Search API"),(0,s.kt)("p",null,"Search API is the preferred way when browsing through your assets in Compass. Let's see how powerful Compass is for discovering your assets."),(0,s.kt)("p",null,"Now that we have added more assets to Compass ",(0,s.kt)("a",{parentName:"p",href:"#22-adding-more-assets"},"here"),", let's try to search for our newly added ",(0,s.kt)("inlineCode",{parentName:"p"},"products")," table. To use Search API, we just need to provide a query/text/term."),(0,s.kt)("p",null,"Let's search for our ",(0,s.kt)("inlineCode",{parentName:"p"},"products")," table using a typo query ",(0,s.kt)("inlineCode",{parentName:"p"},'"podcts"'),"."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"curl 'http://localhost:8080/v1beta1/search?text=podcts' \\\n--header 'Compass-User-UUID: john.doe@example.com'\n")),(0,s.kt)("p",null,"Search results:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "data": [\n        {\n            "id": "7c0759f4-feec-4b5e-bf26-bf0d0b1236b1",\n            "urn": "main-postgres:my-database.products",\n            "type": "table",\n            "service": "postgres",\n            "name": "products",\n            "description": ""\n        }\n    ]\n}\n')),(0,s.kt)("p",null,"Compass Search API supports fuzzy search, so even when you give ",(0,s.kt)("inlineCode",{parentName:"p"},'"podcts"'),", it will still be able to fetch your ",(0,s.kt)("inlineCode",{parentName:"p"},"products")," table."),(0,s.kt)("h2",{id:"conclusion"},"Conclusion"),(0,s.kt)("p",null,"Search API is a really powerful discovery tool that you can leverage when storing your assets. It has lots of feature like ",(0,s.kt)("inlineCode",{parentName:"p"},"fuzzy search")," which we just saw, you can also easily filter through asset's type, service and much more."),(0,s.kt)("p",null,"Up to this point, you have learnt how to create assets, inserting assets and querying them. Using these features, you can start leveraging Compass to be your Metadata Discovery Service."),(0,s.kt)("p",null,"Next we will see how you can use Compass to build a Lineage between your assets."))}b.isMDXComponent=!0}}]);